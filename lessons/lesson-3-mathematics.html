<!doctype html>
<html class="no-js" lang="en">
  <head>
    <!-- meta data -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!--font-family-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&amp;subset=devanagari,latin-ext" rel="stylesheet">
    
    <!-- title of site -->
    <title>Lesson 3: Mathematics Behind ML - AI/ML Academy</title>

    <!-- For favicon png -->
    <link rel="shortcut icon" type="image/icon" href="../assets/logo/favicon.png"/>
    
    <!--font-awesome.min.css-->
    <link rel="stylesheet" href="../assets/css/font-awesome.min.css">
    
    <!--bootstrap.min.css-->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    
    <!-- bootsnav -->
    <link rel="stylesheet" href="../assets/css/bootsnav.css">	
    
    <!--style.css-->
    <link rel="stylesheet" href="../assets/css/style.css">

    <!-- MathJax for mathematical notation -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']]
        }
      };
    </script>

    <style>
      .lesson-container {
        min-height: 100vh;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        padding: 30px 0;
      }
      
      .lesson-header {
        text-align: center;
        color: #333;
        margin-bottom: 40px;
        padding: 40px 0;
        background: white;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        border-radius: 15px;
      }
      
      .lesson-header h1 {
        font-size: 2.8rem;
        margin-bottom: 15px;
        color: #667eea;
      }
      
      .lesson-header .lesson-meta {
        display: flex;
        justify-content: center;
        gap: 30px;
        flex-wrap: wrap;
        margin-top: 20px;
        font-size: 1rem;
        color: #666;
      }
      
      .back-link {
        position: absolute;
        top: 20px;
        left: 20px;
        color: #667eea;
        font-size: 1.2rem;
        text-decoration: none;
        transition: all 0.3s ease;
        z-index: 10;
      }
      
      .back-link:hover {
        color: #5a6fd8;
        text-decoration: none;
      }
      
      .lesson-content {
        background: white;
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        margin-bottom: 30px;
      }
      
      .lesson-content h2 {
        color: #667eea;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #f0f2f5;
      }
      
      .lesson-content h3 {
        color: #333;
        margin: 25px 0 15px 0;
      }
      
      .lesson-content p {
        line-height: 1.8;
        color: #555;
        margin-bottom: 20px;
      }
      
      .math-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
      }
      
      .math-section h3 {
        color: white;
        margin-bottom: 20px;
      }
      
      .math-formula {
        background: rgba(255,255,255,0.1);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        margin: 20px 0;
        border-left: 4px solid rgba(255,255,255,0.5);
      }
      
      .math-example {
        background: #e8f4fd;
        border-left: 4px solid #007bff;
        padding: 20px;
        margin: 25px 0;
        border-radius: 5px;
      }
      
      .math-example h4 {
        color: #007bff;
        margin-bottom: 15px;
      }
      
      .concept-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }
      
      .concept-item {
        background: white;
        padding: 20px;
        border-radius: 8px;
        border-left: 4px solid #667eea;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      
      .concept-item h4 {
        color: #667eea;
        margin-bottom: 10px;
      }
      
      .matrix-visual {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
        flex-wrap: wrap;
      }
      
      .matrix {
        background: #333;
        color: #00ff00;
        padding: 15px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        font-size: 1.1rem;
      }
      
      .operation {
        font-size: 2rem;
        color: #667eea;
        font-weight: bold;
      }
      
      .quiz-section {
        background: white;
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        margin: 30px 0;
      }
      
      .quiz-header {
        text-align: center;
        margin-bottom: 30px;
      }
      
      .quiz-header h2 {
        color: #667eea;
        margin-bottom: 10px;
      }
      
      .question {
        margin-bottom: 30px;
        padding: 20px;
        border: 2px solid #f0f2f5;
        border-radius: 10px;
        transition: all 0.3s ease;
      }
      
      .question.correct {
        border-color: #28a745;
        background: #f8fff9;
      }
      
      .question.incorrect {
        border-color: #dc3545;
        background: #fff8f8;
      }
      
      .question h4 {
        margin-bottom: 20px;
        color: #333;
      }
      
      .answer-option {
        display: block;
        padding: 12px 20px;
        margin: 8px 0;
        background: #f8f9fa;
        border: 2px solid transparent;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        user-select: none;
      }
      
      .answer-option:hover {
        background: #e9ecef;
        border-color: #667eea;
      }
      
      .answer-option.selected {
        background: #667eea;
        color: white;
        border-color: #667eea;
      }
      
      .answer-option.correct-answer {
        background: #28a745;
        color: white;
        border-color: #28a745;
      }
      
      .answer-option.wrong-answer {
        background: #dc3545;
        color: white;
        border-color: #dc3545;
      }
      
      .quiz-results {
        text-align: center;
        padding: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 10px;
        margin-top: 30px;
        display: none;
      }
      
      .quiz-results h3 {
        margin-bottom: 20px;
        color: white;
      }
      
      .score-display {
        font-size: 2.5rem;
        font-weight: bold;
        margin: 20px 0;
      }
      
      .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 40px;
        flex-wrap: wrap;
        gap: 15px;
      }
      
      .btn-nav {
        padding: 12px 25px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }
      
      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }
      
      .btn-primary:hover {
        color: white;
        text-decoration: none;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }
      
      .btn-secondary {
        background: #6c757d;
        color: white;
      }
      
      .btn-secondary:hover {
        background: #5a6268;
        color: white;
        text-decoration: none;
      }
      
      .gradient-descent-demo {
        background: rgba(255,255,255,0.1);
        padding: 25px;
        border-radius: 12px;
        margin: 20px 0;
        border: 1px solid rgba(255,255,255,0.3);
      }
      
      .demo-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        flex-wrap: wrap;
        gap: 15px;
      }
      
      .control-group {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        color: rgba(255,255,255,0.9);
      }
      
      .control-group small {
        font-size: 0.8rem;
        color: rgba(255,255,255,0.7);
        text-align: center;
        font-style: italic;
      }
      
      .control-group input[type="range"] {
        width: 120px;
        height: 5px;
        background: rgba(255,255,255,0.3);
        border-radius: 5px;
        outline: none;
      }
      
      .control-group input[type="range"]::-webkit-slider-thumb {
        appearance: none;
        width: 15px;
        height: 15px;
        background: #ffffff;
        border-radius: 50%;
        cursor: pointer;
      }
      
      .demo-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      
      .demo-btn {
        padding: 8px 16px;
        background: rgba(255,255,255,0.2);
        color: white;
        border: 1px solid rgba(255,255,255,0.4);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
      }
      
      .demo-btn:hover {
        background: rgba(255,255,255,0.3);
        border-color: rgba(255,255,255,0.6);
      }
      
      .demo-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      
      .visualization-container {
        display: flex;
        gap: 20px;
        align-items: flex-start;
        flex-wrap: wrap;
      }
      
      #gradient-canvas {
        background: white;
        border-radius: 8px;
        border: 2px solid rgba(255,255,255,0.3);
        flex-shrink: 0;
      }
      
      .demo-info {
        background: rgba(255,255,255,0.1);
        padding: 15px;
        border-radius: 8px;
        border: 1px solid rgba(255,255,255,0.2);
        min-width: 200px;
      }
      
      .info-item {
        margin-bottom: 10px;
        color: rgba(255,255,255,0.9);
        font-size: 0.9rem;
      }
      
      .info-item:last-child {
        margin-bottom: 0;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }

      .metric-item {
        display: flex;
        align-items: center;
        gap: 10px;
        background: rgba(255,255,255,0.05);
        padding: 12px;
        border-radius: 8px;
        border: 1px solid rgba(255,255,255,0.1);
      }

      .metric-icon {
        font-size: 1.5rem;
        flex-shrink: 0;
      }

      .metric-details {
        flex: 1;
      }

      .metric-label {
        font-size: 0.8rem;
        color: rgba(255,255,255,0.7);
        margin-bottom: 2px;
      }

      .metric-value {
        font-size: 1.2rem;
        font-weight: bold;
        color: #ffffff;
        margin-bottom: 2px;
      }

      .metric-desc {
        font-size: 0.7rem;
        color: rgba(255,255,255,0.5);
      }

      .loss-metric .metric-value {
        color: #ff6b6b;
      }

      .accuracy-metric .metric-value {
        color: #51cf66;
      }

      .step-metric .metric-value {
        color: #ffd43b;
      }

      .gradient-metric .metric-value {
        color: #74c0fc;
      }

      .training-status-panel {
        background: rgba(255,255,255,0.08);
        padding: 15px;
        border-radius: 10px;
        border: 1px solid rgba(255,255,255,0.15);
      }

      .status-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 10px;
        color: #ffc107;
        font-weight: bold;
      }

      .status-icon {
        font-size: 1.2rem;
      }

      .status-text {
        color: rgba(255,255,255,0.9);
        margin-bottom: 15px;
        font-style: italic;
      }

      .current-focus {
        padding-top: 10px;
        border-top: 1px solid rgba(255,255,255,0.2);
      }

      .focus-label {
        font-size: 0.9rem;
        color: rgba(255,255,255,0.7);
        margin-bottom: 8px;
      }

      .focus-content {
        display: flex;
        align-items: center;
        gap: 15px;
        flex-wrap: wrap;
      }

      .digit-badge {
        background: #667eea;
        color: white;
        padding: 6px 12px;
        border-radius: 15px;
        font-weight: bold;
        font-size: 0.9rem;
      }

      .confidence-indicator {
        font-size: 0.9rem;
        color: rgba(255,255,255,0.8);
      }

      .confidence-indicator span {
        color: #51cf66;
        font-weight: bold;
      }
    </style>
  </head>
  
  <body>
    <a href="../ml-academy.html" class="back-link">
      <i class="fa fa-arrow-left"></i> Back to Academy
    </a>
    
    <div class="lesson-container">
      <div class="container">
        <!-- Lesson Header -->
        <div class="lesson-header">
          <h1><i class="fa fa-calculator"></i> The Mathematics Behind ML</h1>
          <p>Understanding the mathematical foundations that power machine learning</p>
          <div class="lesson-meta">
            <span><i class="fa fa-clock-o"></i> 25-30 minutes</span>
            <span><i class="fa fa-bar-chart"></i> Intermediate Level</span>
            <span><i class="fa fa-question-circle"></i> 8 Quiz Questions</span>
          </div>
        </div>

        <!-- Lesson Content -->
        <div class="lesson-content">
          <h2>Why Mathematics Matters in ML</h2>
          <p>
            Machine Learning might seem like magic, but it's actually built on solid mathematical foundations. Understanding these concepts helps you:
          </p>
          <ul>
            <li><strong>Choose the right algorithms</strong> for your problems</li>
            <li><strong>Debug and optimize</strong> your models effectively</li>
            <li><strong>Understand why</strong> certain techniques work</li>
            <li><strong>Innovate</strong> and create new approaches</li>
          </ul>
          
          <p>
            Don't worry - we'll focus on the intuition behind the math rather than complex proofs!
          </p>

          <h2>Linear Algebra: The Language of ML</h2>
          
          <div class="math-section">
            <h3>Vectors and Matrices</h3>
            <p>Think of vectors as lists of numbers, and matrices as tables of numbers. They're how we represent and manipulate data efficiently.</p>
            
            <div class="matrix-visual">
              <div class="matrix">
                Vector: [3, 4, 5]
              </div>
              <div class="matrix">
                Matrix:<br>
                [1  2  3]<br>
                [4  5  6]<br>
                [7  8  9]
              </div>
            </div>
          </div>

          <h3>Why Vectors Matter</h3>
          <div class="concept-grid">
            <div class="concept-item">
              <h4>📊 Data Representation</h4>
              <p>Each data point (like a house with 3 bedrooms, 2 baths, 1500 sq ft) becomes a vector [3, 2, 1500]</p>
            </div>
            <div class="concept-item">
              <h4>🔢 Feature Storage</h4>
              <p>All features of your dataset are stored as vectors, making calculations fast and efficient</p>
            </div>
            <div class="concept-item">
              <h4>🎯 Model Parameters</h4>
              <p>Weights and biases in neural networks are stored as vectors and matrices</p>
            </div>
          </div>

          <div class="math-example">
            <h4><i class="fa fa-lightbulb-o"></i> Real Example: House Price Prediction</h4>
            <p><strong>House features as vector:</strong> [bedrooms, bathrooms, sq_ft] = [3, 2, 1500]</p>
            <p><strong>Model weights as vector:</strong> [w1, w2, w3] = [50000, 30000, 100]</p>
            <div class="math-formula" style="background: white; color: #333; border: 1px solid #ddd;">
              <p><strong>Prediction = dot product:</strong></p>
              <p>Price = (3 × 50000) + (2 × 30000) + (1500 × 100) = $360,000</p>
            </div>
          </div>

          <h3>Matrix Operations in ML</h3>
          <p>Here are the key operations you'll encounter:</p>
          
          <div class="math-section">
            <h3>1. Matrix Multiplication</h3>
            <div class="math-formula">
              $$\begin{bmatrix} a & b \\ c & d \end{bmatrix} \times \begin{bmatrix} e \\ f \end{bmatrix} = \begin{bmatrix} ae + bf \\ ce + df \end{bmatrix}$$
            </div>
            <p>This is how neural networks process data through layers!</p>
          </div>

          <h2>Calculus: Understanding Change</h2>
          <p>
            Calculus helps us understand how small changes in inputs affect outputs. In ML, this is crucial for optimization.
          </p>

          <h3>Derivatives: The Rate of Change</h3>
          <div class="math-example">
            <h4>Intuitive Example</h4>
            <p>Imagine you're climbing a hill (your error function). The derivative tells you:</p>
            <ul>
              <li><strong>Direction:</strong> Which way is steeper (uphill or downhill)</li>
              <li><strong>Steepness:</strong> How steep the slope is</li>
            </ul>
            <p>In ML, we use this to find the "bottom of the valley" (minimum error).</p>
          </div>

          <div class="math-section">
            <h3>Partial Derivatives</h3>
            <p>When you have multiple variables (like multiple weights), partial derivatives tell you how changing one variable affects the output while keeping others constant.</p>
            
            <div class="math-formula">
              <p>For function f(x, y), partial derivatives are:</p>
              $$\frac{\partial f}{\partial x} \text{ and } \frac{\partial f}{\partial y}$$
            </div>
            
            <p>This is how we update each weight in a neural network independently!</p>
          </div>

          <h3>The Chain Rule</h3>
          <p>
            The chain rule helps us find derivatives of complex, nested functions. This is the mathematical foundation of backpropagation!
          </p>
          
          <div class="math-formula" style="background: #f8f9fa; color: #333; border: 1px solid #ddd;">
            <p>If y = f(g(x)), then:</p>
            $$\frac{dy}{dx} = \frac{dy}{dg} \times \frac{dg}{dx}$$
          </div>

          <h2>Probability and Statistics</h2>
          <p>
            ML deals with uncertainty and patterns in data. Probability helps us quantify and work with this uncertainty.
          </p>

          <h3>Key Concepts</h3>
          <div class="concept-grid">
            <div class="concept-item">
              <h4>🎲 Probability</h4>
              <p>The likelihood of an event occurring. Used in classification (what's the probability this email is spam?)</p>
            </div>
            <div class="concept-item">
              <h4>📈 Distributions</h4>
              <p>Patterns in how data is spread out. Normal, uniform, and exponential distributions are common.</p>
            </div>
            <div class="concept-item">
              <h4>📊 Bayes' Theorem</h4>
              <p>Updates probability based on new evidence. Foundation of Naive Bayes classifiers.</p>
            </div>
            <div class="concept-item">
              <h4>🎯 Expected Value</h4>
              <p>The average outcome you'd expect. Used in decision-making and risk assessment.</p>
            </div>
          </div>

          <div class="math-section">
            <h3>Bayes' Theorem in Action</h3>
            <div class="math-formula">
              $$P(A|B) = \frac{P(B|A) \times P(A)}{P(B)}$$
            </div>
            <p>Read as: "Probability of A given B"</p>
            
            <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid rgba(255,255,255,0.4);">
              <p style="color: #ffffff;"><strong>Spam Detection Example:</strong></p>
              <p style="color: #ffffff;">P(Spam | word "FREE") = P("FREE" | Spam) × P(Spam) / P("FREE")</p>
              <p style="color: #ffffff;">If 80% of spam emails contain "FREE", 10% of all emails are spam, and 15% of all emails contain "FREE":</p>
              <p style="color: #ffffff;">P(Spam | "FREE") = (0.8 × 0.1) / 0.15 = 53.3%</p>
            </div>
          </div>

          <h2>Optimization: Finding the Best Solution</h2>
          <p>
            ML is essentially an optimization problem - we want to find the best parameters that minimize error.
          </p>

          <h3>Gradient Descent</h3>
          <p>
            The most important optimization algorithm in ML. Think of it as rolling a ball down a hill to find the bottom.
          </p>

          <div class="math-example">
            <h4>How Gradient Descent Works:</h4>
            <ol>
              <li><strong>Start</strong> at a random point on the hill (random weights)</li>
              <li><strong>Calculate gradient</strong> (which direction is downhill?)</li>
              <li><strong>Take a step</strong> in that direction</li>
              <li><strong>Repeat</strong> until you reach the bottom</li>
            </ol>
          </div>

          <div class="math-section">
            <h3>The Update Rule</h3>
            <div class="math-formula">
              $$w_{new} = w_{old} - \alpha \times \frac{\partial J}{\partial w}$$
            </div>
            <p>Where:</p>
            <ul style="color: rgba(255,255,255,0.9); margin-left: 20px;">
              <li><strong>w:</strong> weight parameter</li>
              <li><strong>α (alpha):</strong> learning rate (how big steps to take)</li>
              <li><strong>∂J/∂w:</strong> gradient (direction of steepest ascent)</li>
            </ul>
          </div>

          <h3>🏔️ Interactive MNIST Digit Classifier Training</h3>
          <p style="color: rgba(255,255,255,0.9);">Experience how gradient descent trains a neural network to recognize handwritten digits from the famous MNIST dataset!</p>
          
          <div class="mnist-context" style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #ffc107;">
            <h4 style="color: #ffc107; margin-bottom: 15px;">📝 What is MNIST?</h4>
            <p style="color: rgba(255,255,255,0.9); margin-bottom: 10px;">The MNIST dataset contains 70,000 images of handwritten digits (0-9). Each image is 28x28 pixels, and our neural network learns to classify which digit is shown.</p>
            <p style="color: rgba(255,255,255,0.8); font-size: 0.9em;">This is the "Hello World" of machine learning - where most people start learning!</p>
          </div>
          
          <div class="gradient-descent-demo">
            <div class="demo-controls">
              <div class="control-group">
                <label>Learning Rate (α): <span id="lr-value">0.1</span></label>
                <input type="range" id="learning-rate" min="0.01" max="0.5" step="0.01" value="0.1">
                <small>Controls how big steps the optimizer takes</small>
              </div>
              <div class="demo-buttons">
                <button class="demo-btn" id="start-btn" onclick="startGradientDescent()">
                  🚀 Start Training
                </button>
                <button class="demo-btn" id="reset-btn" onclick="resetDemo()">
                  🔄 Reset Demo
                </button>
                <button class="demo-btn" id="step-btn" onclick="stepGradientDescent()">
                  👆 Single Step
                </button>
              </div>
            </div>
            
            <div class="visualization-container">
              <canvas id="gradient-canvas" width="400" height="300"></canvas>
              <div class="demo-info">
                <div class="metrics-grid">
                  <div class="metric-item loss-metric">
                    <div class="metric-icon">📉</div>
                    <div class="metric-details">
                      <div class="metric-label">Training Loss</div>
                      <div class="metric-value" id="current-loss">4.00</div>
                      <div class="metric-desc">Cross-entropy error</div>
                    </div>
                  </div>
                  
                  <div class="metric-item accuracy-metric">
                    <div class="metric-icon">🎯</div>
                    <div class="metric-details">
                      <div class="metric-label">MNIST Accuracy</div>
                      <div class="metric-value" id="mnist-accuracy">12%</div>
                      <div class="metric-desc">Correct predictions</div>
                    </div>
                  </div>
                  
                  <div class="metric-item step-metric">
                    <div class="metric-icon">⚡</div>
                    <div class="metric-details">
                      <div class="metric-label">Training Step</div>
                      <div class="metric-value" id="step-count">0</div>
                      <div class="metric-desc">Weight updates</div>
                    </div>
                  </div>
                  
                  <div class="metric-item gradient-metric">
                    <div class="metric-icon">📐</div>
                    <div class="metric-details">
                      <div class="metric-label">Current Gradient</div>
                      <div class="metric-value" id="current-gradient">4.0</div>
                      <div class="metric-desc">Error slope</div>
                    </div>
                  </div>
                </div>
                
                <div class="training-status-panel">
                  <div class="status-header">
                    <span class="status-icon">🤖</span>
                    <strong>Model Status</strong>
                  </div>
                  <div class="status-text" id="training-status">Ready to train MNIST digit classifier</div>
                  
                  <div class="current-focus">
                    <div class="focus-label">Currently Learning:</div>
                    <div class="focus-content">
                      <span class="digit-badge" id="current-digit">Digit "8"</span>
                      <span class="confidence-indicator">
                        Confidence: <span id="digit-confidence">12%</span>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <h2>Loss Functions: Measuring Mistakes</h2>
          <p>
            Loss functions quantify how wrong our predictions are. Different problems need different loss functions.
          </p>

          <div class="concept-grid">
            <div class="concept-item">
              <h4>📏 Mean Squared Error (MSE)</h4>
              <p>For regression problems. Heavily penalizes large errors.</p>
              <div style="background: #f8f9fa; padding: 8px; border-radius: 4px; margin-top: 8px; color: #333; font-family: monospace;">
                MSE = (1/n) × Σ(actual - predicted)²
              </div>
            </div>
            <div class="concept-item">
              <h4>🎯 Cross-Entropy</h4>
              <p>For classification problems. Measures how far predicted probabilities are from actual outcomes.</p>
              <div style="background: #f8f9fa; padding: 8px; border-radius: 4px; margin-top: 8px; color: #333; font-family: monospace;">
                CE = -Σ y × log(ŷ)
              </div>
            </div>
          </div>

          <h2>Putting It All Together</h2>
          <p>
            Here's how these mathematical concepts work together in machine learning:
          </p>
          <ol>
            <li><strong>Linear Algebra:</strong> Organizes and processes data efficiently</li>
            <li><strong>Calculus:</strong> Finds the best direction to update parameters</li>
            <li><strong>Probability:</strong> Handles uncertainty and makes predictions</li>
            <li><strong>Optimization:</strong> Finds the best parameters automatically</li>
          </ol>
        </div>

        <!-- Quiz Section -->
        <div class="quiz-section">
          <div class="quiz-header">
            <h2><i class="fa fa-question-circle"></i> Knowledge Check</h2>
            <p>Test your understanding of the mathematical foundations</p>
          </div>

          <!-- Question 1 -->
          <div class="question" data-question="1">
            <h4>1. What is a vector in the context of machine learning?</h4>
            <div class="answer-option" data-answer="a">A) A mathematical operation</div>
            <div class="answer-option" data-answer="b">B) A list of numbers representing data points or features</div>
            <div class="answer-option" data-answer="c">C) A type of neural network</div>
            <div class="answer-option" data-answer="d">D) A programming language</div>
          </div>

          <!-- Question 2 -->
          <div class="question" data-question="2">
            <h4>2. What does a derivative tell us in the context of optimization?</h4>
            <div class="answer-option" data-answer="a">A) The final answer</div>
            <div class="answer-option" data-answer="b">B) The direction and steepness of change</div>
            <div class="answer-option" data-answer="c">C) The data distribution</div>
            <div class="answer-option" data-answer="d">D) The probability of an event</div>
          </div>

          <!-- Question 3 -->
          <div class="question" data-question="3">
            <h4>3. What is the purpose of gradient descent?</h4>
            <div class="answer-option" data-answer="a">A) To classify data</div>
            <div class="answer-option" data-answer="b">B) To find the minimum of a function (optimal parameters)</div>
            <div class="answer-option" data-answer="c">C) To generate new data</div>
            <div class="answer-option" data-answer="d">D) To visualize results</div>
          </div>

          <!-- Question 4 -->
          <div class="question" data-question="4">
            <h4>4. In the gradient descent update rule w_new = w_old - α × ∂J/∂w, what does α represent?</h4>
            <div class="answer-option" data-answer="a">A) The gradient</div>
            <div class="answer-option" data-answer="b">B) The error</div>
            <div class="answer-option" data-answer="c">C) The learning rate</div>
            <div class="answer-option" data-answer="d">D) The weight</div>
          </div>

          <!-- Question 5 -->
          <div class="question" data-question="5">
            <h4>5. Which loss function is typically used for regression problems?</h4>
            <div class="answer-option" data-answer="a">A) Cross-entropy</div>
            <div class="answer-option" data-answer="b">B) Mean Squared Error (MSE)</div>
            <div class="answer-option" data-answer="c">C) Hinge loss</div>
            <div class="answer-option" data-answer="d">D) Log loss</div>
          </div>

          <!-- Question 6 -->
          <div class="question" data-question="6">
            <h4>6. What does Bayes' theorem help us calculate?</h4>
            <div class="answer-option" data-answer="a">A) Derivatives</div>
            <div class="answer-option" data-answer="b">B) Matrix multiplication</div>
            <div class="answer-option" data-answer="c">C) Updated probabilities based on new evidence</div>
            <div class="answer-option" data-answer="d">D) Gradient descent steps</div>
          </div>

          <!-- Question 7 -->
          <div class="question" data-question="7">
            <h4>7. The chain rule is fundamental to which ML algorithm?</h4>
            <div class="answer-option" data-answer="a">A) Linear regression</div>
            <div class="answer-option" data-answer="b">B) K-means clustering</div>
            <div class="answer-option" data-answer="c">C) Backpropagation in neural networks</div>
            <div class="answer-option" data-answer="d">D) Decision trees</div>
          </div>

          <!-- Question 8 -->
          <div class="question" data-question="8">
            <h4>8. In a house price prediction model, if features are [bedrooms, bathrooms, sq_ft] = [3, 2, 1500] and weights are [50000, 30000, 100], what's the prediction?</h4>
            <div class="answer-option" data-answer="a">A) $300,000</div>
            <div class="answer-option" data-answer="b">B) $360,000</div>
            <div class="answer-option" data-answer="c">C) $180,000</div>
            <div class="answer-option" data-answer="d">D) $450,000</div>
          </div>

          <div class="text-center">
            <button class="btn-nav btn-primary" onclick="submitQuiz()">Submit Quiz</button>
          </div>

          <div class="quiz-results" id="quiz-results">
            <h3>Quiz Complete!</h3>
            <div class="score-display" id="score-display">0/8</div>
            <p id="score-message">Great job! You're understanding the mathematical foundations.</p>
          </div>
        </div>

        <!-- Navigation -->
        <div class="navigation-buttons">
          <a href="lesson-2-neural-networks.html" class="btn-nav btn-secondary">
            <i class="fa fa-arrow-left"></i> Previous: Neural Networks
          </a>
          <a href="lesson-4-forward-prop.html" class="btn-nav btn-primary" id="next-lesson-btn" style="opacity: 0.5; pointer-events: none;">
            Next Lesson: Forward Propagation <i class="fa fa-arrow-right"></i>
          </a>
        </div>
      </div>
    </div>

    <script>
      // Gradient Descent Visualization
      let canvas, ctx;
      let currentX = 2.0;
      let learningRate = 0.1;
      let animationId = null;
      let isAnimating = false;
      let stepCount = 0;
      let path = [];

      // Loss function: f(x) = (x - 0)^2 = x^2
      function lossFunction(x) {
        return x * x;
      }

      // Gradient of f(x) = x^2 is f'(x) = 2x
      function gradient(x) {
        return 2 * x;
      }

      function initializeGradientDescent() {
        canvas = document.getElementById('gradient-canvas');
        if (!canvas) return;
        
        ctx = canvas.getContext('2d');
        
        // Add event listener for learning rate slider
        const lrSlider = document.getElementById('learning-rate');
        if (lrSlider) {
          lrSlider.addEventListener('input', function() {
            learningRate = parseFloat(this.value);
            document.getElementById('lr-value').textContent = learningRate.toFixed(2);
            // Redraw visualization with new learning rate
            drawVisualization();
          });
        }
        
        drawVisualization();
      }

      function drawVisualization() {
        if (!ctx) return;
        
        // Clear canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Draw function curve
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.beginPath();
        
        for (let x = -3; x <= 3; x += 0.1) {
          const canvasX = (x + 3) * (canvas.width / 6);
          const canvasY = canvas.height - (lossFunction(x) * 30 + 20);
          
          if (x === -3) {
            ctx.moveTo(canvasX, canvasY);
          } else {
            ctx.lineTo(canvasX, canvasY);
          }
        }
        ctx.stroke();
        
        // Draw path taken by gradient descent
        if (path.length > 1) {
          ctx.strokeStyle = '#007bff';
          ctx.lineWidth = 2;
          ctx.beginPath();
          
          for (let i = 0; i < path.length; i++) {
            const canvasX = (path[i] + 3) * (canvas.width / 6);
            const canvasY = canvas.height - (lossFunction(path[i]) * 30 + 20);
            
            if (i === 0) {
              ctx.moveTo(canvasX, canvasY);
            } else {
              ctx.lineTo(canvasX, canvasY);
            }
          }
          ctx.stroke();
          
          // Draw points on the path
          ctx.fillStyle = '#007bff';
          for (let i = 0; i < path.length; i++) {
            const canvasX = (path[i] + 3) * (canvas.width / 6);
            const canvasY = canvas.height - (lossFunction(path[i]) * 30 + 20);
            
            ctx.beginPath();
            ctx.arc(canvasX, canvasY, 3, 0, 2 * Math.PI);
            ctx.fill();
          }
        }
        
        // Draw current position
        const canvasX = (currentX + 3) * (canvas.width / 6);
        const canvasY = canvas.height - (lossFunction(currentX) * 30 + 20);
        
        ctx.fillStyle = '#dc3545';
        ctx.beginPath();
        ctx.arc(canvasX, canvasY, 6, 0, 2 * Math.PI);
        ctx.fill();
        
        // Draw gradient arrow
        const grad = gradient(currentX);
        const arrowLength = Math.min(50, Math.abs(grad * 10));
        const arrowEndX = canvasX - (grad > 0 ? arrowLength : -arrowLength);
        
        ctx.strokeStyle = '#28a745';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(canvasX, canvasY);
        ctx.lineTo(arrowEndX, canvasY);
        ctx.stroke();
        
        // Draw arrow head
        const headSize = 8;
        const direction = grad > 0 ? -1 : 1;
        ctx.beginPath();
        ctx.moveTo(arrowEndX, canvasY);
        ctx.lineTo(arrowEndX + direction * headSize, canvasY - headSize/2);
        ctx.lineTo(arrowEndX + direction * headSize, canvasY + headSize/2);
        ctx.closePath();
        ctx.fillStyle = '#28a745';
        ctx.fill();
        
        // Draw axes labels
        ctx.fillStyle = '#333';
        ctx.font = '12px Arial';
        ctx.fillText('Weight (w)', canvas.width / 2 - 20, canvas.height - 5);
        
        ctx.save();
        ctx.translate(15, canvas.height / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.fillText('Loss', 0, 0);
        ctx.restore();
        
        // Update info display
        updateInfoDisplay();
      }

      function updateInfoDisplay() {
        // Update metric values
        const currentLoss = lossFunction(currentX);
        const accuracy = Math.max(10, Math.min(95, 95 - (currentLoss * 15)));
        const confidence = Math.max(10, Math.min(90, 90 - (currentLoss * 12)));
        
        document.getElementById('current-loss').textContent = currentLoss.toFixed(2);
        document.getElementById('current-gradient').textContent = gradient(currentX).toFixed(2);
        document.getElementById('step-count').textContent = stepCount;
        document.getElementById('mnist-accuracy').textContent = accuracy.toFixed(0) + '%';
        document.getElementById('digit-confidence').textContent = confidence.toFixed(0) + '%';
        
        // Update training status with MNIST context
        const statusElement = document.getElementById('training-status');
        if (currentLoss < 0.1) {
          statusElement.textContent = "🎉 Excellent! Model recognizes MNIST digits with high accuracy";
          statusElement.style.color = '#51cf66';
        } else if (currentLoss < 0.5) {
          statusElement.textContent = "📈 Good progress! Learning digit feature patterns";
          statusElement.style.color = '#ffd43b';
        } else if (stepCount > 0) {
          statusElement.textContent = "🔄 Training... adjusting weights for digit classification";
          statusElement.style.color = '#74c0fc';
        } else {
          statusElement.textContent = "Ready to train MNIST digit classifier";
          statusElement.style.color = 'rgba(255,255,255,0.9)';
        }
        
        // Randomly update current digit being focused on
        if (stepCount > 0 && stepCount % 3 === 0) {
          const digits = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
          const randomDigit = digits[Math.floor(Math.random() * digits.length)];
          document.getElementById('current-digit').textContent = `Digit "${randomDigit}"`;
        }
      }

      function stepGradientDescent() {
        const grad = gradient(currentX);
        currentX = currentX - learningRate * grad;
        stepCount++;
        path.push(currentX);
        drawVisualization();
        
        // Stop if converged
        if (Math.abs(grad) < 0.001) {
          stopGradientDescent();
        }
      }

      function startGradientDescent() {
        if (isAnimating) return;
        
        isAnimating = true;
        document.getElementById('start-btn').disabled = true;
        
        function animate() {
          stepGradientDescent();
          
          if (Math.abs(gradient(currentX)) > 0.001 && isAnimating) {
            animationId = setTimeout(animate, 500);
          } else {
            stopGradientDescent();
          }
        }
        
        animate();
      }

      function stopGradientDescent() {
        isAnimating = false;
        if (animationId) {
          clearTimeout(animationId);
          animationId = null;
        }
        document.getElementById('start-btn').disabled = false;
      }

      function resetDemo() {
        stopGradientDescent();
        currentX = 2.0;
        stepCount = 0;
        path = [currentX];
        drawVisualization();
      }

      // Initialize when page loads
      document.addEventListener('DOMContentLoaded', function() {
        // Small delay to ensure all elements are loaded
        setTimeout(() => {
          initializeGradientDescent();
          resetDemo();
        }, 100);
      });

      // Quiz functionality
      const correctAnswers = {
        1: 'b',
        2: 'b', 
        3: 'b',
        4: 'c',
        5: 'b',
        6: 'c',
        7: 'c',
        8: 'b'
      };

      let selectedAnswers = {};
      let quizCompleted = false;

      // Handle answer selection
      document.querySelectorAll('.answer-option').forEach(option => {
        option.addEventListener('click', function() {
          const question = this.closest('.question');
          const questionNum = question.dataset.question;
          
          // Remove previous selection
          question.querySelectorAll('.answer-option').forEach(opt => {
            opt.classList.remove('selected');
          });
          
          // Add selection to clicked option
          this.classList.add('selected');
          selectedAnswers[questionNum] = this.dataset.answer;
        });
      });

      function submitQuiz() {
        if (Object.keys(selectedAnswers).length < 8) {
          alert('Please answer all questions before submitting!');
          return;
        }

        let score = 0;
        
        // Check answers and show results
        for (let i = 1; i <= 8; i++) {
          const question = document.querySelector(`[data-question="${i}"]`);
          const userAnswer = selectedAnswers[i];
          const correctAnswer = correctAnswers[i];
          
          const selectedOption = question.querySelector(`[data-answer="${userAnswer}"]`);
          const correctOption = question.querySelector(`[data-answer="${correctAnswer}"]`);
          
          if (userAnswer === correctAnswer) {
            score++;
            question.classList.add('correct');
            selectedOption.classList.add('correct-answer');
          } else {
            question.classList.add('incorrect');
            selectedOption.classList.add('wrong-answer');
            correctOption.classList.add('correct-answer');
          }
        }

        // Show results
        const resultsDiv = document.getElementById('quiz-results');
        const scoreDisplay = document.getElementById('score-display');
        const scoreMessage = document.getElementById('score-message');
        
        scoreDisplay.textContent = `${score}/8`;
        
        if (score >= 7) {
          scoreMessage.textContent = "Excellent! You have a strong grasp of the mathematical foundations.";
        } else if (score >= 5) {
          scoreMessage.textContent = "Good work! You're building solid mathematical understanding.";
        } else {
          scoreMessage.textContent = "Keep studying! Mathematical concepts take time to master.";
        }
        
        resultsDiv.style.display = 'block';
        
        // Mark lesson as completed and enable next lesson
        if (score >= 5) {
          localStorage.setItem('lesson_3_completed', 'true');
          localStorage.setItem('lesson_3_score', score);
          
          const nextBtn = document.getElementById('next-lesson-btn');
          nextBtn.style.opacity = '1';
          nextBtn.style.pointerEvents = 'auto';
        }
        
        quizCompleted = true;
        
        // Disable further answer changes
        document.querySelectorAll('.answer-option').forEach(option => {
          option.style.pointerEvents = 'none';
        });
      }
    </script>
  </body>
</html>