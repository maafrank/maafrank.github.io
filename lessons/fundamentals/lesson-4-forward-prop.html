<!doctype html>
<html class="no-js" lang="en">
  <head>
    <!-- meta data -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!--font-family-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&amp;subset=devanagari,latin-ext" rel="stylesheet">
    
    <!-- title of site -->
    <title>Lesson 4: Forward Propagation - AI/ML Academy</title>

    <!-- For favicon png -->
    <link rel="shortcut icon" type="image/icon" href="../assets/logo/favicon.png"/>
    
    <!--font-awesome.min.css-->
    <link rel="stylesheet" href="../assets/css/font-awesome.min.css">
    
    <!--bootstrap.min.css-->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    
    <!-- bootsnav -->
    <link rel="stylesheet" href="../assets/css/bootsnav.css">	
    
    <!--style.css-->
    <link rel="stylesheet" href="../assets/css/style.css">

    <!-- MathJax for mathematical notation -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']]
        }
      };
    </script>

    <style>
      .lesson-container {
        min-height: 100vh;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        padding: 30px 0;
      }
      
      .lesson-header {
        text-align: center;
        color: #333;
        margin-bottom: 40px;
        padding: 40px 0;
        background: white;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        border-radius: 15px;
      }
      
      .lesson-header h1 {
        font-size: 2.8rem;
        margin-bottom: 15px;
        color: #667eea;
      }
      
      .lesson-header .lesson-meta {
        display: flex;
        justify-content: center;
        gap: 30px;
        flex-wrap: wrap;
        margin-top: 20px;
        font-size: 1rem;
        color: #666;
      }
      
      .back-link {
        position: absolute;
        top: 20px;
        left: 20px;
        color: #667eea;
        font-size: 1.2rem;
        text-decoration: none;
        transition: all 0.3s ease;
        z-index: 10;
      }
      
      .back-link:hover {
        color: #5a6fd8;
        text-decoration: none;
      }
      
      .lesson-content {
        background: white;
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        margin-bottom: 30px;
      }
      
      .lesson-content h2 {
        color: #667eea;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #f0f2f5;
      }
      
      .lesson-content h3 {
        color: #333;
        margin: 25px 0 15px 0;
      }
      
      .lesson-content p {
        line-height: 1.8;
        color: #555;
        margin-bottom: 20px;
      }
      
      .flow-diagram {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
        text-align: center;
      }
      
      .flow-visual {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        margin: 20px 0;
        flex-wrap: wrap;
      }
      
      .layer-node {
        width: 80px;
        height: 80px;
        border-radius: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        position: relative;
        color: #333;
      }
      
      .input-layer {
        background: #28a745;
        color: white;
      }
      
      .hidden-layer {
        background: #ffc107;
      }
      
      .output-layer {
        background: #dc3545;
        color: white;
      }
      
      .flow-arrow {
        font-size: 2rem;
        color: rgba(255,255,255,0.8);
        margin: 0 10px;
      }
      
      .layer-label {
        font-size: 0.8rem;
        margin-top: 5px;
      }
      
      .step-by-step {
        background: #e8f4fd;
        border-left: 4px solid #007bff;
        padding: 25px;
        border-radius: 10px;
        margin: 30px 0;
      }
      
      .step-by-step h3 {
        color: #007bff;
        margin-bottom: 20px;
      }
      
      .step-item {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid #28a745;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      
      .step-number {
        display: inline-block;
        background: #28a745;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        text-align: center;
        line-height: 30px;
        font-weight: bold;
        margin-right: 15px;
        font-size: 1.1rem;
      }
      
      .math-example {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid #667eea;
      }
      
      .math-example h4 {
        color: #667eea;
        margin-bottom: 15px;
      }
      
      .calculation-box {
        background: #333;
        color: #00ff00;
        padding: 15px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        margin: 10px 0;
        overflow-x: auto;
      }
      
      .interactive-demo {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
        text-align: center;
      }
      
      .demo-network {
        display: grid;
        grid-template-columns: 1fr 2fr 1fr;
        gap: 30px;
        margin: 20px 0;
        align-items: center;
      }
      
      .demo-inputs, .demo-outputs {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      
      .demo-hidden {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }
      
      .demo-neuron {
        background: rgba(255,255,255,0.2);
        padding: 10px;
        border-radius: 8px;
        font-size: 0.9rem;
      }
      
      .quiz-section {
        background: white;
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        margin: 30px 0;
      }
      
      .quiz-header {
        text-align: center;
        margin-bottom: 30px;
      }
      
      .quiz-header h2 {
        color: #667eea;
        margin-bottom: 10px;
      }
      
      .question {
        margin-bottom: 30px;
        padding: 20px;
        border: 2px solid #f0f2f5;
        border-radius: 10px;
        transition: all 0.3s ease;
      }
      
      .question.correct {
        border-color: #28a745;
        background: #f8fff9;
      }
      
      .question.incorrect {
        border-color: #dc3545;
        background: #fff8f8;
      }
      
      .question h4 {
        margin-bottom: 20px;
        color: #333;
      }
      
      .answer-option {
        display: block;
        padding: 12px 20px;
        margin: 8px 0;
        background: #f8f9fa;
        border: 2px solid transparent;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        user-select: none;
      }
      
      .answer-option:hover {
        background: #e9ecef;
        border-color: #667eea;
      }
      
      .answer-option.selected {
        background: #667eea;
        color: white;
        border-color: #667eea;
      }
      
      .answer-option.correct-answer {
        background: #28a745;
        color: white;
        border-color: #28a745;
      }
      
      .answer-option.wrong-answer {
        background: #dc3545;
        color: white;
        border-color: #dc3545;
      }
      
      .quiz-results {
        text-align: center;
        padding: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 10px;
        margin-top: 30px;
        display: none;
      }
      
      .quiz-results h3 {
        margin-bottom: 20px;
        color: white;
      }
      
      .score-display {
        font-size: 2.5rem;
        font-weight: bold;
        margin: 20px 0;
      }
      
      .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 40px;
        flex-wrap: wrap;
        gap: 15px;
      }
      
      .btn-nav {
        padding: 12px 25px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }
      
      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }
      
      .btn-primary:hover {
        color: white;
        text-decoration: none;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }
      
      .btn-secondary {
        background: #6c757d;
        color: white;
      }
      
      .btn-secondary:hover {
        background: #5a6268;
        color: white;
        text-decoration: none;
      }
      
      .input-control small {
        display: block;
        font-size: 0.8rem;
        color: rgba(255,255,255,0.7);
        margin-top: 5px;
        font-style: italic;
        text-align: center;
      }
      
      .forward-prop-demo {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
      }
      
      .demo-controls {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }
      
      .input-control {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        color: rgba(255,255,255,0.9);
      }
      
      .input-control input[type="range"] {
        width: 100px;
        height: 5px;
        background: rgba(255,255,255,0.3);
        border-radius: 5px;
        outline: none;
      }
      
      .input-control input[type="range"]::-webkit-slider-thumb {
        appearance: none;
        width: 15px;
        height: 15px;
        background: #ffffff;
        border-radius: 50%;
        cursor: pointer;
      }
      
      .network-visualization {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 800px;
        margin: 0 auto;
      }
      
      .layer {
        display: flex;
        flex-direction: column;
        gap: 20px;
        align-items: center;
      }
      
      .layer-title {
        font-weight: bold;
        margin-bottom: 10px;
        color: rgba(255,255,255,0.9);
      }
      
      .neuron {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: rgba(255,255,255,0.2);
        border: 2px solid rgba(255,255,255,0.5);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
      }
      
      .neuron.active {
        background: rgba(255,255,255,0.4);
        border-color: rgba(255,255,255,0.8);
        box-shadow: 0 0 15px rgba(255,255,255,0.6);
      }
      
      .neuron-value {
        font-weight: bold;
        font-size: 0.9rem;
      }
      
      .neuron-label {
        font-size: 0.7rem;
        margin-top: 2px;
      }
      
      .connection-arrow {
        font-size: 1.5rem;
        color: rgba(255,255,255,0.7);
        margin: 0 15px;
      }
      
      .calculation-details {
        background: rgba(255,255,255,0.1);
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
        border: 1px solid rgba(255,255,255,0.3);
      }
      
      .calc-step {
        margin-bottom: 15px;
        padding: 10px;
        background: rgba(255,255,255,0.05);
        border-radius: 5px;
        border-left: 3px solid rgba(255,255,255,0.5);
      }
      
      .calc-step:last-child {
        margin-bottom: 0;
      }
      
      .calc-step h4 {
        color: rgba(255,255,255,0.9);
        margin-bottom: 5px;
        font-size: 1rem;
      }
      
      .calc-step p {
        color: rgba(255,255,255,0.8);
        margin: 0;
        font-family: monospace;
        font-size: 0.9rem;
      }
    </style>
  </head>
  
  <body>
    <a href="../fundamentals-course.html" class="back-link">
      <i class="fa fa-arrow-left"></i> Back to Course
    </a>
    
    <div class="lesson-container">
      <div class="container">
        <!-- Lesson Header -->
        <div class="lesson-header">
          <h1><i class="fa fa-arrow-right"></i> Forward Propagation</h1>
          <p>Learn how data flows through neural networks to make predictions</p>
          <div class="lesson-meta">
            <span><i class="fa fa-clock-o"></i> 20-25 minutes</span>
            <span><i class="fa fa-bar-chart"></i> Intermediate Level</span>
            <span><i class="fa fa-question-circle"></i> 8 Quiz Questions</span>
          </div>
        </div>

        <!-- Lesson Content -->
        <div class="lesson-content">
          <h2>What is Forward Propagation?</h2>
          <p>
            <strong>Forward Propagation</strong> is the process by which input data flows through a neural network from the input layer to the output layer to produce a prediction. Think of it as the "thinking" process of the neural network - data enters, gets processed layer by layer, and produces a final answer.
          </p>
          
          <p>
            Imagine a factory assembly line where raw materials (input data) enter at one end, go through various processing stations (hidden layers), and emerge as a finished product (prediction) at the other end. Each station transforms the materials based on specific instructions (weights and biases).
          </p>

          <div class="flow-diagram">
            <h3>Data Flow in Neural Networks</h3>
            <div class="flow-visual">
              <div class="layer-node input-layer">
                <span>Input</span>
                <div class="layer-label">Raw Data</div>
              </div>
              <div class="flow-arrow">→</div>
              <div class="layer-node hidden-layer">
                <span>Hidden</span>
                <div class="layer-label">Processing</div>
              </div>
              <div class="flow-arrow">→</div>
              <div class="layer-node hidden-layer">
                <span>Hidden</span>
                <div class="layer-label">Processing</div>
              </div>
              <div class="flow-arrow">→</div>
              <div class="layer-node output-layer">
                <span>Output</span>
                <div class="layer-label">Prediction</div>
              </div>
            </div>
            <p>Information flows in one direction: Input → Hidden Layers → Output</p>
          </div>

          <h2>The Step-by-Step Process</h2>
          
          <div class="step-by-step">
            <h3>Forward Propagation Algorithm</h3>
            
            <div class="step-item">
              <span class="step-number">1</span>
              <strong>Input Layer:</strong> Feed the input data into the network. No computation happens here - just data entry.
            </div>
            
            <div class="step-item">
              <span class="step-number">2</span>
              <strong>Weight Multiplication:</strong> Multiply each input by its corresponding weight for connections to the next layer.
            </div>
            
            <div class="step-item">
              <span class="step-number">3</span>
              <strong>Sum and Add Bias:</strong> Calculate the weighted sum of inputs and add the bias term for each neuron.
            </div>
            
            <div class="step-item">
              <span class="step-number">4</span>
              <strong>Apply Activation:</strong> Pass the weighted sum through an activation function to get the neuron's output.
            </div>
            
            <div class="step-item">
              <span class="step-number">5</span>
              <strong>Repeat for Each Layer:</strong> Use the outputs from the current layer as inputs to the next layer.
            </div>
            
            <div class="step-item">
              <span class="step-number">6</span>
              <strong>Final Output:</strong> The output layer produces the network's prediction or classification.
            </div>
          </div>

          <h2>Mathematical Formulation</h2>
          <p>Let's break down the mathematics behind forward propagation:</p>

          <div class="math-example">
            <h4>For each neuron in layer l:</h4>
            <div style="text-align: center; margin: 20px 0;">
              $$z^{[l]} = W^{[l]} \cdot a^{[l-1]} + b^{[l]}$$
              $$a^{[l]} = \sigma(z^{[l]})$$
            </div>
            <p><strong>Where:</strong></p>
            <ul>
              <li><strong>z<sup>[l]</sup>:</strong> Weighted sum (pre-activation) for layer l</li>
              <li><strong>W<sup>[l]</sup>:</strong> Weight matrix for layer l</li>
              <li><strong>a<sup>[l-1]</sup>:</strong> Activations from previous layer</li>
              <li><strong>b<sup>[l]</sup>:</strong> Bias vector for layer l</li>
              <li><strong>σ:</strong> Activation function</li>
              <li><strong>a<sup>[l]</sup>:</strong> Activations for layer l</li>
            </ul>
          </div>

          <h2>Real MNIST Digit Classification</h2>
          <p>Let's follow a handwritten digit "8" through a complete neural network:</p>

          <div class="math-example">
            <h4>MNIST Network Architecture:</h4>
            <ul>
              <li><strong>Input Layer:</strong> 784 neurons (28×28 pixel image of handwritten digit)</li>
              <li><strong>Hidden Layer:</strong> 128 feature detectors (curves, lines, corners)</li>
              <li><strong>Output Layer:</strong> 10 neurons (probability for each digit 0-9)</li>
            </ul>
          </div>

          <h3>Step 1: Digit Image Input</h3>
          <div class="calculation-box" style="background: #f8f9fa; color: #333; border-left: 4px solid #667eea;">
            <strong>Input Image:</strong> 28×28 pixel handwritten "8"<br>
            Raw pixels: [0.0, 0.2, 0.8, 0.9, 0.8, 0.2, 0.0, ...] (784 values)<br>
            <em>Each pixel: 0.0 = white background, 1.0 = black ink</em>
          </div>

          <h3>Step 2: Feature Detection (Hidden Layer)</h3>
          <p>Feature detectors identify digit patterns:</p>
          <div class="calculation-box" style="background: #f8f9fa; color: #333; border-left: 4px solid #28a745;">
            <strong>Curve Detector:</strong> z₁ = Σ(pixels × curve_weights) + bias = 3.2<br>
            <strong>Top Loop:</strong> a₁ = ReLU(3.2) = 3.2 ✅ Strong curve detected<br><br>
            <strong>Middle Cross:</strong> z₂ = Σ(pixels × cross_weights) + bias = 2.8<br>
            <strong>Bottom Loop:</strong> a₂ = ReLU(2.8) = 2.8 ✅ Intersection found
          </div>

          <h3>Step 3: Digit Classification (Output Layer)</h3>
          <p>Combining features to classify the digit:</p>
          <div class="calculation-box" style="background: #f8f9fa; color: #333; border-left: 4px solid #007bff;">
            <strong>All 10 outputs after softmax:</strong><br>
            [0.01, 0.02, 0.03, 0.02, 0.01, 0.04, 0.02, 0.03, <strong>0.78</strong>, 0.04]<br>
            <strong>Prediction:</strong> Digit "8" with 78% confidence! 🎯
          </div>

          <h2>Common Activation Functions in Forward Pass</h2>
          <div class="step-by-step">
            <h3>Activation Functions and Their Roles</h3>
            
            <div class="step-item">
              <span class="step-number">📊</span>
              <strong>ReLU (Hidden Layers):</strong> f(x) = max(0, x) - Fast computation, prevents vanishing gradients
            </div>
            
            <div class="step-item">
              <span class="step-number">📈</span>
              <strong>Sigmoid (Binary Classification):</strong> f(x) = 1/(1 + e^(-x)) - Outputs probability between 0 and 1
            </div>
            
            <div class="step-item">
              <span class="step-number">🎯</span>
              <strong>Softmax (Multi-class):</strong> Converts outputs to probability distribution that sums to 1
            </div>
            
            <div class="step-item">
              <span class="step-number">⚖️</span>
              <strong>Tanh (Normalized Outputs):</strong> f(x) = (e^x - e^(-x))/(e^x + e^(-x)) - Outputs between -1 and 1
            </div>
          </div>

          <h2>Matrix Operations in Practice</h2>
          <p>Neural networks use matrix operations for efficient computation:</p>

          <div class="math-example">
            <h4>Vectorized Forward Pass:</h4>
            <div style="background: #333; color: #00ff00; padding: 15px; border-radius: 8px; font-family: monospace; margin: 15px 0;">
              # Instead of computing each neuron individually:<br>
              for i in range(neurons):<br>
              &nbsp;&nbsp;z[i] = sum(w[i] * x) + b[i]<br><br>
              
              # Use matrix multiplication:<br>
              Z = W @ X + B  # Much faster!
            </div>
            <p>This allows processing entire batches of data simultaneously, making training much more efficient.</p>
          </div>

          <h2>Practical Considerations</h2>
          
          <h3>Batch Processing</h3>
          <p>
            In practice, we don't process one example at a time. Instead, we process batches of examples simultaneously using matrix operations. This is much more efficient and allows for better hardware utilization.
          </p>

          <h3>Layer Dimensions</h3>
          <p>
            The dimensions of weight matrices are crucial. For a layer with n inputs and m outputs, the weight matrix is m×n. This ensures proper matrix multiplication: (m×n) × (n×1) = (m×1).
          </p>

          <div class="forward-prop-demo">
            <h3>🔢 MNIST Digit Classification Network</h3>
            <p>Watch a real digit recognition network in action! Adjust pixel intensities to see classification:</p>
            
            <div class="demo-controls">
              <div class="input-control">
                <label>Top Region: <span id="input1-val">0.9</span></label>
                <input type="range" id="input1-slider" min="0" max="1" step="0.1" value="0.9">
                <small>Upper pixels intensity</small>
              </div>
              <div class="input-control">
                <label>Middle Region: <span id="input2-val">0.7</span></label>
                <input type="range" id="input2-slider" min="0" max="1" step="0.1" value="0.7">
                <small>Center pixels intensity</small>
              </div>
              <div class="input-control">
                <button onclick="animateForwardPass()" style="padding: 8px 16px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.4); border-radius: 5px; cursor: pointer;">
                  🎯 Classify Digit
                </button>
              </div>
            </div>
            
            <div class="network-visualization">
              <div class="layer">
                <div class="layer-title">Pixel Inputs</div>
                <div class="neuron" id="input1-neuron">
                  <div class="neuron-value" id="input1-display">0.9</div>
                  <div class="neuron-label">Top</div>
                </div>
                <div class="neuron" id="input2-neuron">
                  <div class="neuron-value" id="input2-display">0.7</div>
                  <div class="neuron-label">Middle</div>
                </div>
              </div>
              
              <div class="connection-arrow">→</div>
              
              <div class="layer">
                <div class="layer-title">Feature Detection</div>
                <div class="neuron" id="hidden1-neuron">
                  <div class="neuron-value" id="hidden1-display">0.76</div>
                  <div class="neuron-label">Curves</div>
                </div>
                <div class="neuron" id="hidden2-neuron">
                  <div class="neuron-value" id="hidden2-display">0.58</div>
                  <div class="neuron-label">Lines</div>
                </div>
              </div>
              
              <div class="connection-arrow">→</div>
              
              <div class="layer">
                <div class="layer-title">Digit Recognition</div>
                <div class="neuron" id="output-neuron">
                  <div class="neuron-value" id="output-display">0.82</div>
                  <div class="neuron-label">Digit "8"</div>
                </div>
              </div>
            </div>
            
            <div class="calculation-details">
              <h3>MNIST Classification Process</h3>
              
              <div class="calc-step">
                <h4>Curve Feature Detector:</h4>
                <p id="hidden1-calc">z₁ = (0.9 × 0.6) + (0.7 × 0.4) + 0.1 = 0.92</p>
                <p id="hidden1-activation">curves = ReLU(0.92) = 0.92</p>
              </div>
              
              <div class="calc-step">
                <h4>Line Feature Detector:</h4>
                <p id="hidden2-calc">z₂ = (0.9 × 0.2) + (0.7 × 0.3) + 0.15 = 0.54</p>
                <p id="hidden2-activation">lines = ReLU(0.54) = 0.54</p>
              </div>
              
              <div class="calc-step">
                <h4>Digit "8" Classifier:</h4>
                <p id="output-calc">z = (0.92 × 0.8) + (0.54 × 0.2) + (-0.1) = 0.84</p>
                <p id="output-activation">confidence = Sigmoid(0.84) = 0.70 → <span id="prediction-text">Predicted: "8" (70% confident)</span></p>
              </div>
            </div>
          </div>

          <h2>Forward Propagation vs. Training</h2>
          <p>
            It's important to distinguish between forward propagation and training:
          </p>
          <ul>
            <li><strong>Forward Propagation:</strong> Used both during training and inference (making predictions)</li>
            <li><strong>During Training:</strong> Forward pass → calculate loss → backward pass (backpropagation) → update weights</li>
            <li><strong>During Inference:</strong> Forward pass only → get prediction</li>
          </ul>
        </div>

        <!-- Quiz Section -->
        <div class="quiz-section">
          <div class="quiz-header">
            <h2><i class="fa fa-question-circle"></i> Knowledge Check</h2>
            <p>Test your understanding of forward propagation</p>
          </div>

          <!-- Question 1 -->
          <div class="question" data-question="1">
            <h4>1. What is the main purpose of forward propagation?</h4>
            <div class="answer-option" data-answer="a">A) To update weights in the network</div>
            <div class="answer-option" data-answer="b">B) To calculate the loss function</div>
            <div class="answer-option" data-answer="c">C) To process input data through the network to make predictions</div>
            <div class="answer-option" data-answer="d">D) To optimize the learning rate</div>
          </div>

          <!-- Question 2 -->
          <div class="question" data-question="2">
            <h4>2. In which direction does information flow during forward propagation?</h4>
            <div class="answer-option" data-answer="a">A) Output to input</div>
            <div class="answer-option" data-answer="b">B) Input to output</div>
            <div class="answer-option" data-answer="c">C) Bidirectional</div>
            <div class="answer-option" data-answer="d">D) Random direction</div>
          </div>

          <!-- Question 3 -->
          <div class="question" data-question="3">
            <h4>3. What happens at each neuron during forward propagation?</h4>
            <div class="answer-option" data-answer="a">A) Only weight multiplication</div>
            <div class="answer-option" data-answer="b">B) Weighted sum, add bias, apply activation function</div>
            <div class="answer-option" data-answer="c">C) Only activation function application</div>
            <div class="answer-option" data-answer="d">D) Random number generation</div>
          </div>

          <!-- Question 4 -->
          <div class="question" data-question="4">
            <h4>4. What is the mathematical formula for the pre-activation value in layer l?</h4>
            <div class="answer-option" data-answer="a">A) z[l] = W[l] + a[l-1] + b[l]</div>
            <div class="answer-option" data-answer="b">B) z[l] = W[l] × a[l-1] + b[l]</div>
            <div class="answer-option" data-answer="c">C) z[l] = W[l] × a[l-1] - b[l]</div>
            <div class="answer-option" data-answer="d">D) z[l] = W[l] / a[l-1] + b[l]</div>
          </div>

          <!-- Question 5 -->
          <div class="question" data-question="5">
            <h4>5. Why do we use matrix operations in forward propagation?</h4>
            <div class="answer-option" data-answer="a">A) They are more accurate</div>
            <div class="answer-option" data-answer="b">B) They allow efficient batch processing and faster computation</div>
            <div class="answer-option" data-answer="c">C) They reduce memory usage</div>
            <div class="answer-option" data-answer="d">D) They are easier to understand</div>
          </div>

          <!-- Question 6 -->
          <div class="question" data-question="6">
            <h4>6. What activation function is commonly used in hidden layers?</h4>
            <div class="answer-option" data-answer="a">A) Softmax</div>
            <div class="answer-option" data-answer="b">B) Linear</div>
            <div class="answer-option" data-answer="c">C) ReLU</div>
            <div class="answer-option" data-answer="d">D) Step function</div>
          </div>

          <!-- Question 7 -->
          <div class="question" data-question="7">
            <h4>7. When is forward propagation used?</h4>
            <div class="answer-option" data-answer="a">A) Only during training</div>
            <div class="answer-option" data-answer="b">B) Only during inference</div>
            <div class="answer-option" data-answer="c">C) Both during training and inference</div>
            <div class="answer-option" data-answer="d">D) Only during weight initialization</div>
          </div>

          <!-- Question 8 -->
          <div class="question" data-question="8">
            <h4>8. In a layer with 100 inputs and 50 outputs, what are the dimensions of the weight matrix?</h4>
            <div class="answer-option" data-answer="a">A) 100 × 50</div>
            <div class="answer-option" data-answer="b">B) 50 × 100</div>
            <div class="answer-option" data-answer="c">C) 150 × 1</div>
            <div class="answer-option" data-answer="d">D) 1 × 150</div>
          </div>

          <div class="text-center">
            <button class="btn-nav btn-primary" onclick="submitQuiz()">Submit Quiz</button>
          </div>

          <div class="quiz-results" id="quiz-results">
            <h3>Quiz Complete!</h3>
            <div class="score-display" id="score-display">0/8</div>
            <p id="score-message">Great job! You understand forward propagation.</p>
          </div>
        </div>

        <!-- Navigation -->
        <div class="navigation-buttons">
          <a href="lesson-3-mathematics.html" class="btn-nav btn-secondary">
            <i class="fa fa-arrow-left"></i> Previous: Mathematics
          </a>
          <a href="lesson-5-backprop.html" class="btn-nav btn-primary" id="next-lesson-btn" style="opacity: 0.5; pointer-events: none;">
            Next Lesson: Backpropagation <i class="fa fa-arrow-right"></i>
          </a>
        </div>
      </div>
    </div>

    <script>
      // MNIST Digit Classification Network
      // Realistic weights for digit "8" detection
      const weights = {
        // Feature detector weights: [top_to_curves, middle_to_curves, top_to_lines, middle_to_lines]
        hidden: [[0.6, 0.4], [0.2, 0.3]],  // curves detector, lines detector
        // Classification weights: [curves_to_digit8, lines_to_digit8]
        output: [0.8, 0.2]
      };
      
      const biases = {
        hidden: [0.1, 0.15],  // curve bias, line bias
        output: -0.1  // digit "8" classification bias
      };

      function relu(x) {
        return Math.max(0, x);
      }

      function sigmoid(x) {
        return 1 / (1 + Math.exp(-x));
      }

      function updateForwardProp() {
        // Get pixel intensity inputs
        const topPixels = parseFloat(document.getElementById('input1-slider').value);
        const middlePixels = parseFloat(document.getElementById('input2-slider').value);
        
        // Update input displays
        document.getElementById('input1-val').textContent = topPixels.toFixed(1);
        document.getElementById('input2-val').textContent = middlePixels.toFixed(1);
        document.getElementById('input1-display').textContent = topPixels.toFixed(1);
        document.getElementById('input2-display').textContent = middlePixels.toFixed(1);
        
        // Calculate feature detectors (hidden layer)
        const z1 = topPixels * weights.hidden[0][0] + middlePixels * weights.hidden[0][1] + biases.hidden[0];
        const curves = relu(z1);  // Curve feature detector
        
        const z2 = topPixels * weights.hidden[1][0] + middlePixels * weights.hidden[1][1] + biases.hidden[1];
        const lines = relu(z2);   // Line feature detector
        
        // Update feature detector displays
        document.getElementById('hidden1-display').textContent = curves.toFixed(2);
        document.getElementById('hidden2-display').textContent = lines.toFixed(2);
        
        // Calculate digit classification (output layer)
        const z_out = curves * weights.output[0] + lines * weights.output[1] + biases.output;
        const confidence = sigmoid(z_out);
        
        // Update output display
        document.getElementById('output-display').textContent = confidence.toFixed(2);
        
        // Update calculation details with MNIST context
        document.getElementById('hidden1-calc').textContent = 
          `z₁ = (${topPixels.toFixed(1)} × ${weights.hidden[0][0]}) + (${middlePixels.toFixed(1)} × ${weights.hidden[0][1]}) + ${biases.hidden[0]} = ${z1.toFixed(2)}`;
        document.getElementById('hidden1-activation').textContent = 
          `curves = ReLU(${z1.toFixed(2)}) = ${curves.toFixed(2)}`;
          
        document.getElementById('hidden2-calc').textContent = 
          `z₂ = (${topPixels.toFixed(1)} × ${weights.hidden[1][0]}) + (${middlePixels.toFixed(1)} × ${weights.hidden[1][1]}) + ${biases.hidden[1]} = ${z2.toFixed(2)}`;
        document.getElementById('hidden2-activation').textContent = 
          `lines = ReLU(${z2.toFixed(2)}) = ${lines.toFixed(2)}`;
          
        document.getElementById('output-calc').textContent = 
          `z = (${curves.toFixed(2)} × ${weights.output[0]}) + (${lines.toFixed(2)} × ${weights.output[1]}) + ${biases.output} = ${z_out.toFixed(2)}`;
          
        // Update prediction with confidence levels
        const predictionElement = document.getElementById('prediction-text');
        let prediction = "";
        let confidenceLevel = "";
        
        if (confidence > 0.8) {
          prediction = "Very confident it's an '8'";
          confidenceLevel = "🎯 Excellent match!";
          predictionElement.style.color = '#28a745';
        } else if (confidence > 0.6) {
          prediction = "Likely an '8'";
          confidenceLevel = "✅ Good match";
          predictionElement.style.color = '#28a745';
        } else if (confidence > 0.4) {
          prediction = "Maybe an '8'";
          confidenceLevel = "⚠️ Uncertain";
          predictionElement.style.color = '#ffc107';
        } else {
          prediction = "Probably not an '8'";
          confidenceLevel = "❌ Poor match";
          predictionElement.style.color = '#dc3545';
        }
        
        document.getElementById('output-activation').innerHTML = 
          `confidence = Sigmoid(${z_out.toFixed(2)}) = ${confidence.toFixed(2)} → <span id="prediction-text" style="color: ${predictionElement.style.color}">${prediction} (${(confidence * 100).toFixed(0)}%)</span>`;
      }

      function animateForwardPass() {
        // Reset all neuron states
        document.querySelectorAll('.neuron').forEach(neuron => {
          neuron.classList.remove('active');
        });
        
        // Animate the forward pass
        setTimeout(() => {
          document.getElementById('input1-neuron').classList.add('active');
          document.getElementById('input2-neuron').classList.add('active');
        }, 200);
        
        setTimeout(() => {
          document.getElementById('input1-neuron').classList.remove('active');
          document.getElementById('input2-neuron').classList.remove('active');
          document.getElementById('hidden1-neuron').classList.add('active');
          document.getElementById('hidden2-neuron').classList.add('active');
        }, 800);
        
        setTimeout(() => {
          document.getElementById('hidden1-neuron').classList.remove('active');
          document.getElementById('hidden2-neuron').classList.remove('active');
          document.getElementById('output-neuron').classList.add('active');
        }, 1400);
        
        setTimeout(() => {
          document.getElementById('output-neuron').classList.remove('active');
        }, 2000);
      }

      // Initialize forward propagation demo
      document.addEventListener('DOMContentLoaded', function() {
        // Add event listeners to sliders
        document.getElementById('input1-slider').addEventListener('input', updateForwardProp);
        document.getElementById('input2-slider').addEventListener('input', updateForwardProp);
        
        // Initialize with default values
        updateForwardProp();
      });

      // Quiz functionality
      const correctAnswers = {
        1: 'c',
        2: 'b', 
        3: 'b',
        4: 'b',
        5: 'b',
        6: 'c',
        7: 'c',
        8: 'b'
      };

      let selectedAnswers = {};
      let quizCompleted = false;

      // Handle answer selection
      document.querySelectorAll('.answer-option').forEach(option => {
        option.addEventListener('click', function() {
          const question = this.closest('.question');
          const questionNum = question.dataset.question;
          
          // Remove previous selection
          question.querySelectorAll('.answer-option').forEach(opt => {
            opt.classList.remove('selected');
          });
          
          // Add selection to clicked option
          this.classList.add('selected');
          selectedAnswers[questionNum] = this.dataset.answer;
        });
      });

      function submitQuiz() {
        if (Object.keys(selectedAnswers).length < 8) {
          alert('Please answer all questions before submitting!');
          return;
        }

        let score = 0;
        
        // Check answers and show results
        for (let i = 1; i <= 8; i++) {
          const question = document.querySelector(`[data-question="${i}"]`);
          const userAnswer = selectedAnswers[i];
          const correctAnswer = correctAnswers[i];
          
          const selectedOption = question.querySelector(`[data-answer="${userAnswer}"]`);
          const correctOption = question.querySelector(`[data-answer="${correctAnswer}"]`);
          
          if (userAnswer === correctAnswer) {
            score++;
            question.classList.add('correct');
            selectedOption.classList.add('correct-answer');
          } else {
            question.classList.add('incorrect');
            selectedOption.classList.add('wrong-answer');
            correctOption.classList.add('correct-answer');
          }
        }

        // Show results
        const resultsDiv = document.getElementById('quiz-results');
        const scoreDisplay = document.getElementById('score-display');
        const scoreMessage = document.getElementById('score-message');
        
        scoreDisplay.textContent = `${score}/8`;
        
        if (score >= 7) {
          scoreMessage.textContent = "Excellent! You understand forward propagation very well.";
        } else if (score >= 5) {
          scoreMessage.textContent = "Good work! You're grasping the key concepts of data flow.";
        } else {
          scoreMessage.textContent = "Keep studying! Review the step-by-step process and try again.";
        }
        
        resultsDiv.style.display = 'block';
        
        // Mark lesson as completed and enable next lesson
        if (score >= 5) {
          localStorage.setItem('lesson_4_completed', 'true');
          localStorage.setItem('lesson_4_score', score);
          
          const nextBtn = document.getElementById('next-lesson-btn');
          nextBtn.style.opacity = '1';
          nextBtn.style.pointerEvents = 'auto';
        }
        
        quizCompleted = true;
        
        // Disable further answer changes
        document.querySelectorAll('.answer-option').forEach(option => {
          option.style.pointerEvents = 'none';
        });
      }
    </script>
  </body>
</html>
